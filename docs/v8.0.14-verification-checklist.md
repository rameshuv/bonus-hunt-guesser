# Bonus Hunt Guesser — v8.0.14 Verification Checklist

**Legend:** ✅ Pass · ❌ Fail · ⚠️ Partial/Needs Follow-up · ⬜ Not Tested

Each table lists the requirement, current status, the exact issue observed, and the plugin files/templates that must be updated to meet the customer contract. File paths are relative to the project root.

## 0) Plugin Header & Standards
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Header values match spec | ❌ | Header still shows version `8.0.12`, lacks `Requires MySQL: 5.5.5`, and minimum WP value is `5.5.5` instead of `6.3.0`. | `bonus-hunt-guesser.php` |
| Text domain loads correctly | ✅ | `load_plugin_textdomain()` is called with the correct domain and path. | — |
| PHPCS (WordPress standard) passes | ❌ | Running `composer phpcs` reports spacing, nonce, and SQL preparation violations across admin templates. | Multiple (`admin/views/*.php`, `includes/*.php`) |

## 1) BHG Dashboard (Admin → Dashboard)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Latest hunts show all winners (separate rows) | ❌ | Winners for each hunt are concatenated into a single cell instead of separate list rows. | `admin/views/dashboard.php` |
| Winner usernames bolded | ❌ | Winners render without `<strong>` or equivalent bold styling. | `admin/views/dashboard.php`, `assets/css/admin.css` |
| Rename “Recent Winners” → “Latest Hunts” with required columns | ❌ | Section title and table headings still reference “Recent Winners” and omit per-winner guess/difference columns. | `admin/views/dashboard.php` |

## 2) `bhg-bonus-hunts` Admin Screens
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Tournament multiselect only shows active tournaments | ❌ | Multiselect pulls every tournament; no meta/status filter is applied. | `admin/views/bonus-hunts.php` |
| Results button lists guesses sorted by accuracy | ✅ | Closed hunts expose a “Results” button that renders the ranking table. | — |
| Configurable winner count (1–25) | ✅ | Admin form exposes a drop-down for winners per hunt. | — |
| Edit screen lists all guessers with remove links and profile shortcuts | ✅ | Participant list with delete icons and user profile links is present. | — |
| Final Balance column shows dash until hunt closes | ✅ | Listing displays “—” for open hunts and the stored value for closed hunts. | — |

## 3) `bhg-bonus-hunts-results`
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Row striping consistent (grey/white) | ✅ | Table leverages `widefat striped` classes. | — |
| Winners highlighted in green **and** bold | ⚠️ | Winners get a green background but retain normal font weight. | `admin/views/bonus-hunts-results.php`, `assets/css/admin.css` |
| “Price” column present | ❌ | Results table omits the price heading and values entirely. | `admin/views/bonus-hunts-results.php` |

## 4) `bhg-tournaments` — Connected Bonus Hunts Filter
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Selector limits to current-year hunts plus existing connections | ❌ | Query loads every hunt with no year filter or inclusion of previously linked hunts. | `admin/views/tournaments.php` |

## 5) `bhg-users` (Admin Table)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Search box for users/email | ✅ | Search field submits to filter WP_User_Query results. | — |
| Sortable table headers | ✅ | Columns include order links leveraging `orderby`/`order` params. | — |
| Pagination (30 per page) | ✅ | Results are paginated with navigation controls for 30 users per page. | — |

## 6) `bhg-affiliates` (Sync with User Profiles)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Adding affiliate creates profile toggles | ❌ | Saving an affiliate only stores the affiliate record; no user meta fields or profile checkboxes are created. | `admin/class-bhg-admin.php`, `admin/views/users.php` |
| Removing affiliate cleans up user profile fields | ❌ | Deleting an affiliate leaves stale user meta; cleanup routine is missing. | `admin/class-bhg-admin.php` |

## 7) `bhg-prizes` (Admin CRUD)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Prize CRUD with required fields | ✅ | Title, description, category, and active toggle exist on the form. | — |
| Image sizes (small/medium/big) managed | ✅ | Three image selectors map to small/medium/large meta keys. | — |
| CSS panel controls present | ✅ | Border, colour, padding, margin, and background inputs appear on form. | — |

## 8) Bonus Hunt ↔ Prizes Linking
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Select one or more prizes per hunt | ✅ | Add/edit hunt forms expose a multi-select of available prizes and persist selections. | — |

## 9) Prizes — Frontend (Active Hunt)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Active hunts display attached prizes | ✅ | Shortcode output renders prize grids for hunts marked active. | — |
| Grid and carousel layouts available with dots/arrows | ✅ | `render_prize_section()` handles both layouts and navigation UI. | — |

## 10) Prizes Shortcode (`[bhg_prizes]`)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Attributes: category, design, size, active | ✅ | Shortcode accepts all required attributes and applies filters. | — |

## 11) User Profile Shortcodes (Frontend “My Profile”)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Register `[my_bonushunts]`, `[my_tournaments]`, `[my_prizes]`, `[my_rankings]` | ❌ | Only `bhg_*` aliases exist; the `my_*` shortcodes from the brief are absent. | `includes/class-bhg-shortcodes.php` |
| Admin toggles hide/show each block | ❌ | No option in settings to enable/disable each profile block. | `admin/views/settings.php`, `includes/class-bhg-shortcodes.php` |

## 12) Global CSS / Colour Panel
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Controls for title, H2, H3, descriptions, p/span (font, spacing, colour) | ❌ | Settings page lacks typography and spacing fields requested by client. | `admin/views/settings.php`, `includes/class-bhg-settings.php` (if introduced) |

## 13) `bhg-shortcodes` (Admin Reference)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Admin submenu lists all shortcodes with options | ❌ | Menu has no “Shortcodes” entry or documentation screen. | `admin/class-bhg-admin.php`, new view under `admin/views/` |

## 14) Notifications (`bhg-notifications`)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Winners/Tournament/Bonus Hunt notification tabs with enable, BCC, HTML editor | ❌ | No notifications submenu or settings forms exist in the admin. | `admin/class-bhg-admin.php`, new views under `admin/views/notifications/` |
| Email delivery via `wp_mail()` with hooks & sanitization | ❌ | No notification sending logic or filters implemented. | `includes/class-bhg-notifications.php` (new), related hooks |

## 15) Tournaments — Prizes & Affiliate Fields
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Tournament form includes affiliate website dropdown & show/hide toggle | ❌ | Form lacks affiliate selection and visibility controls despite DB columns. | `admin/views/tournaments.php`, `includes/class-bhg-db.php` |
| Admin and frontend show linked prizes | ⚠️ | Hunt list appears, but linked prizes are not surfaced in the tournament detail view. | `admin/views/tournaments.php`, relevant frontend templates |

## 16) Tournament Ranking (Points System)
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Editable points map (1st–8th) & scope toggle | ❌ | No configuration UI or storage for rank points. | `admin/views/settings.php`, new settings handlers |
| Rankings aggregate winners by selected hunts | ❌ | No scoring logic or queries to compute tournament rankings. | `includes/class-bhg-tournaments.php` (new), existing leaderboard code |
| Winners/top 3 highlighted | ❌ | Without ranking logic, highlighting is absent from admin/frontend tables. | Same as above |

## 17) Data Integrity & Performance
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Schema migrations up-to-date (indices/foreign keys) | ⚠️ | Tables exist, but indexes and constraints for heavy queries are missing. | `includes/class-bhg-db.php` |
| Avoid N+1 queries & add caching for heavy lists | ⚠️ | Dashboard and results views execute raw `$wpdb` queries per request without caching layers. | `admin/views/dashboard.php`, `admin/views/bonus-hunts-results.php`, introduce caching helpers |
| Uninstall cleanup configurable | ⚠️ | Uninstall script retains most data; add confirmation or opt-in cleanup per brief. | `uninstall.php`, settings |

## 18) Security & Internationalization
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Capability checks on admin pages | ⚠️ | Most screens require `manage_options`, but some AJAX/actions bypass checks. | `admin/class-bhg-admin.php`, AJAX handlers |
| Nonces on write actions | ⚠️ | Several forms lack nonce verification (see PHPCS report). | `admin/views/*.php` |
| Output escaping & input sanitization | ⚠️ | Multiple PHPCS warnings for unescaped output and unsanitized request data. | `admin/views/*.php`, `includes/*.php` |
| All strings translatable (`bonus-hunt-guesser`) | ⚠️ | Some hard-coded strings omit translation wrappers. | `admin/views/*.php`, `includes/*.php` |

## 19) Backward Compatibility
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Legacy settings/data migrated safely | ⚠️ | Migrations drop the old `period` column without mapping to new `type` values. | `includes/class-bhg-db.php`, migration scripts |
| Default values for new options | ⚠️ | Newly introduced fields (e.g., prizes, notifications) lack fallback defaults. | `includes/class-bhg-settings.php`, relevant option registration |

## 20) Release Management & Documentation
| Requirement | Status | Findings | Files to Update |
| --- | --- | --- | --- |
| Version bumped to 8.0.14 everywhere | ❌ | Plugin header, constants, and docs still reference prior versions. | `bonus-hunt-guesser.php`, `README.md`, `CHANGELOG.md` |
| CHANGELOG/readme updated for new features | ❌ | No entries describing 8.0.14 changes, new shortcodes, CSS panel, or notifications. | `CHANGELOG.md`, `README.md`, `docs/` |
| Admin help reflects new functionality | ❌ | Help/info pages omit new shortcodes, attributes, CSS panel options, and notification details. | `admin/views/*.php`, docs |

---

**Key Takeaways**
- Core prize and hunt administration flows exist, but many contract deliverables—notifications, tournament ranking logic, affiliate sync, and UI polish—are missing or incomplete.
- Addressing PHPCS violations will surface additional security hardening (nonces, escaping) required for WordPress.org compliance.
- Significant development remains to align the plugin with the full customer specification before the 8.0.14 release can be signed off.
